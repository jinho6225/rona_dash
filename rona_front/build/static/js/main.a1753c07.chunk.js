(this.webpackJsonprona_front=this.webpackJsonprona_front||[]).push([[0],{154:function(t,e,a){},163:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(1),c=a(42),s=a.n(c),i=(a(154),a(9)),l=a(4),o=a(3),u=a(2),j=a(43),d=function(t){var e=Object(r.useState)(null),a=Object(o.a)(e,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){var e=t.current,a=new j.a((function(t){t.forEach((function(t){c(t.contentRect)}))}));return a.observe(e),function(){a.unobserve(e)}}),[t]),n};var h=function(t){var e=t.data,a=t.maxTotal,c=t.unit,s=Object(r.useRef)(),i=Object(r.useRef)(),l=d(i);return Object(r.useEffect)((function(){var t=Object(u.h)(s.current);if(l){console.log(l,"dime"),e.sort((function(t,e){return e.value-t.value}));var n=Object(u.f)().paddingInner(.1).domain(e.map((function(t,e){return e}))).range([0,l.height]),r=Object(u.g)().domain([0,a+5e4]).range([0,l.width]);t.selectAll(".bar").data(e,(function(t,e){return t.name})).join((function(t){return t.append("rect").attr("y",(function(t,e){return n(e)}))})).attr("fill",(function(t){return t.color})).attr("class","bar").attr("x",0).attr("height",Math.floor(n.bandwidth())-1).transition().attr("width",(function(t){return r(t.value)})).attr("y",(function(t,e){return n(e)}));var i="0.9em";l.height<700&&(i="0.7em"),l.height<550&&(i="0.55em"),t.selectAll(".label").data(e,(function(t,e){return t.name})).join((function(t){return t.append("text").attr("y",(function(t,e){return n(e)+n.bandwidth()/2+5}))})).style("font-size",i).text((function(t){return"".concat(t.name," (").concat(t.value," ").concat(c,")")})).attr("class","label").attr("x",(function(t){return r(t.value)+10})).transition().attr("y",(function(t,e){return n(e)+n.bandwidth()/2+5}))}}),[e,l]),Object(n.jsx)("div",{className:"svgContainer",ref:i,style:{marginBottom:"0.3rem"},children:Object(n.jsx)("svg",{ref:s,className:"racing_svg"})})};var b=function(t,e){var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(null!==e){var t=setInterval((function(){a.current()}),e);return function(){return clearInterval(t)}}}),[e])},f=function(t){for(var e=[],a=0;a<t.length;a++){var n=Math.floor(16777215*Math.random()).toString(16);e.push({name:t[a],value:0,color:"#"+n})}return e};var m=function(){var t=Object(r.useState)(0),e=Object(o.a)(t,2),a=e[0],c=e[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)([]),d=Object(o.a)(j,2),m=d[0],O=d[1],x=Object(r.useState)([]),v=Object(o.a)(x,2),g=v[0],p=v[1],y=Object(r.useRef)(!0),N=Object(r.useState)([]),_=Object(o.a)(N,2),S=_[0],w=_[1],C=Object(r.useState)([]),A=Object(o.a)(C,2),D=A[0],R=A[1],k=Object(r.useState)([]),M=Object(o.a)(k,2),E=M[0],I=M[1],T=Object(r.useState)(0),U=Object(o.a)(T,2),F=U[0],B=U[1],L=Object(r.useState)(0),G=Object(o.a)(L,2),V=G[0],Y=G[1],P=Object(r.useState)([]),W=Object(o.a)(P,2),H=W[0],J=W[1];return Object(r.useEffect)((function(){fetch("http://127.0.0.1:8000/api/dynamic").then((function(t){return t.json()})).then((function(t){w(t.list_of_daily_confirmed_record_by_state),R(t.list_of_daily_death_record_by_state),I(t.date_array),B(t.max_total_confirmed_count_list),Y(t.max_total_death_count_list),J(t.province_list),y.current=!1}))}),[]),Object(r.useEffect)((function(){y.current||(O(f(H)),p(f(H)))}),[H]),b((function(){if(l){var t=m.slice(),e=g.slice();if(t.sort((function(t,e){var a=t.name.toUpperCase(),n=e.name.toUpperCase();return a<n?-1:a>n?1:0})),e.sort((function(t,e){var a=t.name.toUpperCase(),n=e.name.toUpperCase();return a<n?-1:a>n?1:0})),a<S.length){for(var n=0;n<S[a].length;n++)t[n].value=S[a][n];O(t)}if(a<D.length){for(var r=0;r<D[a].length;r++)e[r].value=D[a][r];p(e)}c(a+1),a===S.length&&u(!l)}}),200),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"racing_chart_container",children:[Object(n.jsxs)("div",{className:"racingChart",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:["Total Confirmed by U.S. State",Object(n.jsxs)("span",{className:"date",children:[" (Date: ",E[a]?E[a]:E[E.length-1],")"]})]}),Object(n.jsx)(h,{data:m,maxTotal:F,unit:"confiremd"})]}),Object(n.jsxs)("div",{className:"racingChart",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:["Total Deaths by U.S. State",Object(n.jsxs)("span",{className:"date",children:[" (Date: ",E[a]?E[a]:E[E.length-1],")"]})]}),Object(n.jsx)(h,{data:g,maxTotal:V,unit:"deaths"})]})]}),Object(n.jsxs)("div",{className:"btn-container",children:[Object(n.jsx)("button",{onClick:function(){return u(!l)},children:l?"Stop the race":"Start the race!"}),Object(n.jsx)("button",{onClick:function(){c(0),u(!l)},children:"Restart"})]})]})};var O=function(t){var e=t.data,a=t.province,c=void 0!==a&&a,s=Object(r.useRef)(),i=Object(r.useRef)(),o=d(i),j=Object(l.f)();return Object(r.useEffect)((function(){var t=Object(u.h)(s.current);if(console.log(o),o){var a=c&&c.length?.4:.5,n=Object(u.f)().domain(e.map((function(t,e){return e}))).range([0,o.width]).padding(a),r=c&&c.length?Object(u.d)(e)+5e4:Object(u.d)(e)+5e6,i=Object(u.g)().domain([0,r]).range([o.height,0]),l=c&&c.length?["green","orange","red"]:["red","green","orange"],d=Object(u.g)().domain([0,r/2,r]).range(l).clamp(!0),h=c&&c.length?["Alabama","Alaska","American Samoa","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Diamond Princess","District of Columbia","Florida","Georgia","Grand Princess","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Islands","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]:["confirmed","Deaths","Recovered"],b=Object(u.b)(n).ticks(e.length).tickFormat((function(t,e){return h[e]}));c&&c.length?t.select(".x-axis").style("transform","translateY(".concat(o.height,"px) ")).call(b).selectAll("text").attr("y",6).attr("x",-6).attr("dy",".5em").attr("transform","rotate(-40)").style("text-anchor","end"):!1===c&&t.select(".x-axis").style("transform","translateY(".concat(o.height,"px) ")).call(b);var f=Object(u.c)(i);t.select(".y-axis").style("transform","0").call(f),c&&c.length?t.selectAll(".bar").data(e).join("rect").attr("class","bar").on("mouseenter",(function(e,a){var r=t.selectAll(".bar").nodes().indexOf(this);Object(u.h)(this).attr("opacity",.3).transition(),t.selectAll(".tooltip").data([a]).join((function(t){return t.append("text").attr("y",i(a)-4)})).attr("class","tooltip").text((function(t){return t.toLocaleString()})).attr("x",n(r)+n.bandwidth()/2).attr("text-anchor","middle").transition().attr("y",i(a)-8).attr("opacity",1)})).on("mouseleave",(function(e,a){Object(u.h)(this).attr("opacity",1).transition(),t.selectAll(".tooltip").remove()})).style("transform","scale(1, -1)").attr("x",(function(t,e){return n(e)})).attr("y",-o.height).attr("width",n.bandwidth()).on("click",(function(e,a){var n=t.selectAll(".bar").nodes().indexOf(this);!function(t,e){c&&j.push("/detail/".concat(t[e]))}(c,n)})).transition().attr("fill",d).attr("height",(function(t){return o.height-i(t)})):!1===c&&(t.selectAll(".bar").data(e).join("rect").attr("class","bar").style("transform","scale(1, -1)").attr("x",(function(t,e){return n(e)})).attr("y",-o.height).attr("width",n.bandwidth()).transition().attr("fill",d).attr("height",(function(t){return o.height-i(t)})),t.selectAll(".content").data(e).join((function(t){return t.append("text").attr("y",(function(t){return i(t)-4}))})).attr("class","content").text((function(t){return t.toLocaleString()})).attr("x",(function(t,e){return n(e)+n.bandwidth()/2})).attr("text-anchor","middle").transition().attr("y",(function(t){return i(t)-8})).attr("opacity",1))}}),[e,o,c]),Object(n.jsx)("div",{ref:i,style:{marginBottom:"1.5rem",marginLeft:"4rem"},children:Object(n.jsxs)("svg",{ref:s,className:"main_svg",children:[Object(n.jsx)("g",{className:"x-axis"}),Object(n.jsx)("g",{className:"y-axis"})]})})};var x=function(t){var e=t.data,a=t.colors,c=Object(r.useRef)(),s=Object(r.useRef)(),i=d(s);return Object(r.useEffect)((function(){var t=Object(u.h)(c.current);if(i){var n=e.reduce((function(t,e){return t+e.value}),0);console.log(i,"dimen");var r=130;i.height<250&&(r=100);var s=Object(u.a)().innerRadius(10).outerRadius(r),l=Object(u.e)().padAngle(0).value((function(t){return t.value}))(e);t.selectAll(".slice").data(l).join("path").attr("class","slice").attr("stroke","white").attr("fill",(function(t,e){return a[t.data.name]})).style("transform","translate(".concat(i.width/2,"px, ").concat(i.height/2,"px)")).attr("d",s).transition(),t.selectAll(".labels").data(l).join("text").attr("class","labels").text((function(t,e){var a=t.data.value?t.data.value:0;return a?(100*a/n).toFixed(2)+"%":null})).attr("fill","white").attr("x",(function(t,e){return s.centroid(t)[0]+i.width/2-25})).attr("y",(function(t,e){return s.centroid(t)[1]+i.height/2})).transition()}}),[e,i]),Object(n.jsx)("div",{className:"svgContainer",ref:s,style:{padding:"0"},children:Object(n.jsx)("svg",{ref:c,className:"main_svg"})})};var v={Global:"#ffddc1",US:"#ffab91"};var g=function(){var t=Object(r.useState)([]),e=Object(o.a)(t,2),a=e[0],c=e[1],s=Object(r.useState)([]),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)([]),d=Object(o.a)(j,2),h=d[0],b=d[1],f=Object(r.useState)([]),m=Object(o.a)(f,2),g=m[0],p=m[1],y=Object(r.useState)([]),N=Object(o.a)(y,2),_=N[0],S=N[1],w=Object(r.useRef)(function(){var t=new Date,e=t.getMonth()+1,a=t.getDate(),n=t.getFullYear();return"".concat(e,"/").concat(a,"/").concat(n)}());return Object(r.useEffect)((function(){fetch("http://127.0.0.1:8000/api/overview").then((function(t){return t.json()})).then((function(t){c(t.world_df.count),u(t.confirmed_global_us),b(t.deaths_global_us),p(t.state_df.Confirmed),S(t.state_df.Province_State)}))}),[]),Object(n.jsxs)("div",{className:"main_chart_container",children:[Object(n.jsxs)("div",{className:"barChart1",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:["Global Total Case",Object(n.jsxs)("span",{className:"date",children:[" (Date: ",w.current,")"]})]}),Object(n.jsx)(O,{data:a})]}),Object(n.jsxs)("div",{className:"pieChart1",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:["Confirmed (Global / US)",Object(n.jsxs)("span",{className:"date",children:[" (Date: ",w.current,")"]})]}),Object(n.jsx)(x,{data:l,colors:v}),Object(n.jsx)("div",{className:"fields",children:l.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("label",{htmlFor:t.name,style:{color:v[t.name]},children:t.name})},t.name),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("label",{htmlFor:t.value,style:{color:v[t.name]},children:t.value.toLocaleString()})},t.value)]},t.name)}))})]}),Object(n.jsxs)("div",{className:"pieChart2",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:["Deaths (Global / US)",Object(n.jsxs)("span",{className:"date",children:[" (Date: ",w.current,")"]})]}),Object(n.jsx)(x,{data:h,colors:v}),Object(n.jsx)("div",{className:"fields",children:h.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("label",{htmlFor:t.name,style:{color:v[t.name]},children:t.name})},t.name),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("label",{htmlFor:t.value,style:{color:v[t.name]},children:t.value.toLocaleString()})},t.value)]},t.name)}))})]}),Object(n.jsxs)("div",{className:"barChart2",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:["Total of Confirmed Case By US State",Object(n.jsxs)("span",{className:"date",children:[" (Date: ",w.current,")"]})]}),Object(n.jsx)(O,{data:g,province:_})]})]})};var p=function(){return Object(n.jsxs)("div",{className:"nav",id:"navbarNav",children:[Object(n.jsx)("h3",{className:"title",style:{margin:"0.2rem"},children:Object(n.jsx)(i.b,{to:"/",children:"COVID Tracker"})}),Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"navbar-nav-li",children:Object(n.jsx)(i.b,{to:"/",children:"Home"})}),Object(n.jsx)("li",{className:"navbar-nav-li",children:Object(n.jsx)(i.b,{to:"/racing",children:"Racing Bar Chart"})})]})]})};var y=function(t){var e=t.data,a=t.period,c=t.opt,s=void 0!==c&&c,i=Object(r.useRef)(),l=Object(r.useRef)(),o=d(l);return Object(r.useEffect)((function(){var t=Object(u.h)(i.current);if(console.log(o),o){var n=Object(u.f)().domain(e.map((function(t,e){return e}))).range([0,o.width]).padding(.1),r=s?Object(u.d)(e)+2e3:Object(u.d)(e)+5e4,c=Object(u.g)().domain([0,r]).range([o.height,0]),l=Object(u.g)().domain([0,r/2,r]).range(["green","orange","red"]).clamp(!0),j=Object(u.b)(n).tickValues([]);t.select(".x-axis").style("transform","translateY(".concat(o.height,"px) ")).call(j);var d=s?"Deaths":"Confirmed",h=Object(u.c)(c);t.select(".y-axis").style("transform","0").call(h),t.selectAll(".bar").data(e).join("rect").attr("class","bar").on("mouseenter",(function(e,r){var s=t.selectAll(".bar").nodes().indexOf(this);Object(u.h)(this).attr("opacity",.2).transition(),t.selectAll(".tooltip").data([r]).join((function(t){return t.append("text").attr("y",c(r)-4)})).attr("class","tooltip").text((function(t){return"".concat(a[s],": ").concat(t.toLocaleString()," ").concat(d)})).attr("x",n(s)+n.bandwidth()/2-80).attr("text-anchor","middle").transition().attr("y",c(r)-8).attr("opacity",1)})).on("mouseleave",(function(e,a){Object(u.h)(this).attr("opacity",1).transition(),t.selectAll(".tooltip").remove()})).style("transform","scale(1, -1)").attr("x",(function(t,e){return n(e)})).attr("y",-o.height).attr("width",n.bandwidth()).transition().attr("fill",l).attr("height",(function(t){return o.height-c(t)})),t.selectAll(".y-axis-label").data([d]).join((function(t){return t.append("text").attr("class","y-axis-label")})).attr("fill","Navy").attr("transform","rotate(-90)").attr("y",-55).attr("x",0-o.height/2-48).text((function(t){return t}))}}),[e,o]),Object(n.jsx)("div",{ref:l,style:{marginBottom:"1.5rem",marginLeft:"4rem"},children:Object(n.jsxs)("svg",{ref:i,className:"detail_svg",children:[Object(n.jsx)("g",{className:"x-axis"}),Object(n.jsx)("g",{className:"y-axis"})]})})};var N=function(){var t=Object(r.useState)([]),e=Object(o.a)(t,2),a=e[0],c=e[1],s=Object(r.useState)([]),i=Object(o.a)(s,2),u=i[0],j=i[1],d=Object(r.useState)([]),h=Object(o.a)(d,2),b=h[0],f=h[1],m=Object(r.useRef)(function(){var t=new Date,e=t.getMonth()+1,a=t.getDate(),n=t.getFullYear();return"".concat(e,"/").concat(a,"/").concat(n)}()),O=Object(l.g)().state;return Object(r.useEffect)((function(){fetch("http://127.0.0.1:8000/api/detail/".concat(O)).then((function(t){return t.json()})).then((function(t){c(t.period),j(t.confirmed),f(t.deaths)}))}),[]),Object(n.jsxs)("div",{className:"detail_chart_container",children:[Object(n.jsxs)("div",{className:"detailBarChart",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:[O," Confirmed Total",Object(n.jsxs)("span",{className:"date",children:[" (as of ",m.current,")"]})]}),u.length?Object(n.jsx)(y,{data:u,period:a}):null]}),Object(n.jsxs)("div",{className:"detailBarChart",children:[Object(n.jsxs)("h4",{className:"title",style:{margin:"0.3rem"},children:[O," Deaths Total",Object(n.jsxs)("span",{className:"date",children:[" (as of ",m.current,")"]})]}),b.length?Object(n.jsx)(y,{data:b,opt:!0,period:a}):null]})]})},_=function(){return Object(n.jsxs)(i.a,{children:[Object(n.jsx)(p,{}),Object(n.jsx)(l.c,{children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(g,{})}),Object(n.jsx)(l.a,{path:"/racing",children:Object(n.jsx)(m,{})}),Object(n.jsx)(l.a,{path:"/detail/:state",children:Object(n.jsx)(N,{})})]})})]})};var S=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(_,{})})},w=a(6),C=Object(w.a)();s.a.render(Object(n.jsx)(l.b,{history:C,children:Object(n.jsx)(S,{})}),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.a1753c07.chunk.js.map
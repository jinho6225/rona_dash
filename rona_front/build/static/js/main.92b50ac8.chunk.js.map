{"version":3,"sources":["components/useResizeObserver.js","components/RacingBarChart.js","components/useInterval.js","routes/RacingChartHome.js","components/BarChart.js","components/PieChart.js","routes/Home.js","components/Navigation.js","components/DetailBarChart.js","routes/Detail.js","Router.js","App.js","index.js"],"names":["useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","entries","forEach","entry","contentRect","observe","unobserve","RacingBarChart","data","maxTotal","unit","svgRef","useRef","wrapperRef","svg","select","sort","a","b","value","yScale","scaleBand","paddingInner","domain","map","index","range","height","xScale","scaleLinear","width","selectAll","name","join","enter","append","attr","color","Math","floor","bandwidth","transition","text","className","style","marginBottom","useInterval","callback","delay","savedCallback","id","setInterval","clearInterval","helper","arr","array","i","length","randomColor","random","toString","push","RacingChartHome","iteration","setIteration","start","setStart","confirmedData","setConfirmedData","deathData","setDeathData","isFirstRender","dataArr","setDataArr","deathdataArr","setDeathDataArr","period","setPeriod","setMaxTotal","maxDeathTotal","setMaxDeathTotal","province","setProvince","fetch","then","res","json","list_of_daily_confirmed_record_by_state","list_of_daily_death_record_by_state","date_array","max_total_confirmed_count_list","max_total_death_count_list","province_list","copied","slice","deathCopied","nameA","toUpperCase","nameB","margin","onClick","Barchart","history","useHistory","console","log","padding","maxNum","max","colorScale","clamp","xx","xAxis","axisBottom","ticks","tickFormat","d","call","yAxis","axisLeft","on","event","nodes","indexOf","this","toLocaleString","remove","e","handleClick","val","marginLeft","PieChart","colors","totalSum","reduce","acc","cur","arcGenerator","arc","innerRadius","outerRadius","instructions","pie","padAngle","pieGenerator","num","toFixed","centroid","Home","world","setWorld","confirmed","setConfirmed","deaths","setDeaths","setDate","today","Date","month","getMonth","date","getDate","year","getFullYear","Today","world_df","count","confirmed_global_us","deaths_global_us","state_df","Confirmed","Province_State","BarChart","key","htmlFor","Navigation","to","DetailBarChart","opt","tickValues","title","Detail","state","useParams","AppRouter","exact","path","App","createBrowserHistory","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.92b50ac8.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nconst useResizeObserver = ref => {\n  const [dimensions, setDimensions] = useState(null);\n  useEffect(() => {\n    const observeTarget = ref.current;\n    const resizeObserver = new ResizeObserver(entries => {\n      entries.forEach(entry => {\n        setDimensions(entry.contentRect);\n      });\n    });\n    resizeObserver.observe(observeTarget);\n    return () => {\n      resizeObserver.unobserve(observeTarget);\n    };\n  }, [ref]);\n  return dimensions;\n};\n\nexport default useResizeObserver;","import { select, scaleBand, scaleLinear } from \"d3\";\nimport React, { useEffect, useRef } from \"react\";\nimport useResizeObserver from \"./useResizeObserver\";\n\nfunction RacingBarChart({ data, maxTotal, unit }) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n  // will be called initially and on every data change\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    if (!dimensions) return;\n    // sorting the data\n    data.sort((a, b) => b.value - a.value);\n\n    const yScale = scaleBand()\n        .paddingInner(0.1)\n        .domain(data.map((value, index) => index))\n        .range([0, dimensions.height]);\n\n    const xScale = scaleLinear()\n        .domain([0, maxTotal+50000])\n        .range([0, dimensions.width]);\n\n    //draw the bars\n    svg.selectAll(\".bar\")\n    .data(data, (entry, index) => entry.name)\n    .join(enter => enter.append('rect').attr('y', (entry, index) => yScale(index)))\n    .attr('fill', entry => entry.color)\n    .attr(\"class\", \"bar\")\n    .attr('x', 0)\n    .attr('height', Math.floor(yScale.bandwidth()) - 1)\n    .transition()\n    .attr('width', entry => xScale(entry.value))\n    .attr(\"y\", (entry, index) => yScale(index));\n\n    //draw the labels\n    svg.selectAll('.label')\n    .data(data, (entry, index) => entry.name)\n    .join(enter => enter.append('text').attr('y', (entry, index) => yScale(index) +  yScale.bandwidth() / 2 + 5))\n    .text(entry => `${entry.name} (${entry.value} ${unit})`)\n    .attr('class', 'label')\n    .attr('x', entry => xScale(entry.value) + 10)\n    .transition()\n    .attr(\"y\", (entry, index) => yScale(index) + yScale.bandwidth() / 2 + 5);\n\n  }, [data, dimensions]);\n\n    return (\n    <div className=\"svgContainer\" ref={wrapperRef} style={{ marginBottom: \"0.3rem\" }}>\n        <svg ref={svgRef} className=\"racing_svg\">\n            {/* <g className=\"x-axis\" /> */}\n            {/* <g className=\"y-axis\" /> */}\n\n        </svg>\n    </div>\n    );\n}\n\nexport default RacingBarChart;","import { useEffect, useRef } from \"react\";\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default useInterval;","import React, { useEffect, useState, useRef } from \"react\";\nimport RacingBarChart from \"../components/RacingBarChart\";\nimport useInterval from \"../components/useInterval\";\n\nconst helper = (arr) => {\n  let array = [];\n  for (let i = 0; i < arr.length; i++) {\n    let randomColor = Math.floor(Math.random() * 16777215).toString(16);\n    array.push({\n      name: arr[i],\n      value: 0,\n      color: \"#\" + randomColor,\n    });\n  }\n  return array;\n};\n\nfunction RacingChartHome() {\n  const [iteration, setIteration] = useState(0);\n  const [start, setStart] = useState(false);\n  const [confirmedData, setConfirmedData] = useState([]);\n  const [deathData, setDeathData] = useState([]);\n  const isFirstRender = useRef(true);\n  const [dataArr, setDataArr] = useState([]);\n  const [deathdataArr, setDeathDataArr] = useState([]);\n  const [period, setPeriod] = useState([]);\n  const [maxTotal, setMaxTotal] = useState(0);\n  const [maxDeathTotal, setMaxDeathTotal] = useState(0);\n\n  const [province, setProvince] = useState([]);\n\n  useEffect(() => {\n    // fetch(`http://127.0.0.1:8000/api/dynamic`)\n    fetch(`https://myungjinho85.pythonanywhere.com/api/dynamic`)\n      .then((res) => res.json())\n      .then((data) => {\n        // console.log(data);\n        setDataArr(data.list_of_daily_confirmed_record_by_state);\n        setDeathDataArr(data.list_of_daily_death_record_by_state);\n        setPeriod(data.date_array);\n        setMaxTotal(data.max_total_confirmed_count_list);\n        setMaxDeathTotal(data.max_total_death_count_list);\n        setProvince(data.province_list);\n        isFirstRender.current = false;\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!isFirstRender.current) {\n      setConfirmedData(helper(province));\n      setDeathData(helper(province))\n    }\n  }, [province]);\n\n  useInterval(() => {\n    if (start) {\n      let copied = confirmedData.slice();\n      let deathCopied = deathData.slice();\n      copied.sort(function (a, b) {\n        var nameA = a.name.toUpperCase(); // ignore upper and lowercase\n        var nameB = b.name.toUpperCase(); // ignore upper and lowercase\n        if (nameA < nameB) {\n          return -1;\n        }\n        if (nameA > nameB) {\n          return 1;\n        }\n        return 0;\n      });\n      deathCopied.sort(function (a, b) {\n        var nameA = a.name.toUpperCase(); // ignore upper and lowercase\n        var nameB = b.name.toUpperCase(); // ignore upper and lowercase\n        if (nameA < nameB) {\n          return -1;\n        }\n        if (nameA > nameB) {\n          return 1;\n        }\n        return 0;\n      });\n      if (iteration < dataArr.length) {\n        for (let i = 0; i < dataArr[iteration].length; i++) {\n          copied[i].value = dataArr[iteration][i];\n        }\n        setConfirmedData(copied);\n      }\n      if (iteration < deathdataArr.length) {\n        for (let i = 0; i < deathdataArr[iteration].length; i++) {\n            deathCopied[i].value = deathdataArr[iteration][i];\n        }\n        setDeathData(deathCopied);\n      }\n      setIteration(iteration + 1);\n      if (iteration === dataArr.length) {\n        setStart(!start);\n      }\n    }\n  }, 100);\n  \n  return (\n    <div className=\"container\">\n      <div className=\"racing_chart_container\">\n        <div className=\"racingChart\">\n          <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n            Total Confirmed by U.S. State\n            <span className=\"date\"> (Date: {period[iteration] ? period[iteration] : period[period.length-1]})</span>\n          </h4>\n          <RacingBarChart data={confirmedData} maxTotal={maxTotal} unit={'confiremd'} />\n        </div>\n        <div className=\"racingChart\">\n          <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n            Total Deaths by U.S. State\n            <span className=\"date\"> (Date: {period[iteration] ? period[iteration] : period[period.length-1]})</span>\n          </h4>\n          <RacingBarChart data={deathData} maxTotal={maxDeathTotal} unit={'deaths'} />\n        </div>\n      </div>\n      <div className=\"btn-container\">\n        <button onClick={() => setStart(!start)}>\n            {start ? \"Stop the race\" : \"Start the race!\"}\n        </button>\n        <button onClick={() => {\n            setIteration(0)\n            setStart(!start)\n        }}>\n            Restart\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default RacingChartHome;\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom, scaleLinear, axisLeft, scaleBand, max } from \"d3\";\nimport useResizeObserver from \"./useResizeObserver\";\nimport { useHistory } from \"react-router-dom\";\n\n\nfunction Barchart({ data, province=false }) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef)\n  const history = useHistory();\n\n    function handleClick(d, index) {\n        if (province) {\n            history.push(`/detail/${d[index]}`);\n        }\n    }  \n\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    console.log(dimensions)\n\n    if (!dimensions) return;\n\n    //scale\n    let padding = province && province.length ? 0.4: 0.5\n    const xScale = scaleBand()\n        .domain(data.map((value, index) => index))\n        .range([0, dimensions.width]) // change\n        .padding(padding);\n\n    let maxNum = province && province.length ? max(data)+50000 : max(data)+5000000\n    const yScale = scaleLinear()\n        .domain([0, maxNum]) //todo\n        .range([dimensions.height, 0]); // change\n\n    let color = province && province.length ? [\"green\", \"orange\", \"red\"] : [\"red\", \"green\", \"orange\"]\n    const colorScale = scaleLinear()\n        .domain([0, maxNum/2, maxNum])\n        .range(color)\n        .clamp(true);\n\n    //create x-axis\n    let xx = province && province.length ? [\"Alabama\", \"Alaska\", \"American Samoa\", \"Arizona\", \"Arkansas\", \"California\", \"Colorado\", \"Connecticut\", \"Delaware\", \"Diamond Princess\", \"District of Columbia\", \"Florida\", \"Georgia\", \"Grand Princess\", \"Guam\", \"Hawaii\", \"Idaho\", \"Illinois\", \"Indiana\", \"Iowa\", \"Kansas\", \"Kentucky\", \"Louisiana\", \"Maine\", \"Maryland\", \"Massachusetts\", \"Michigan\", \"Minnesota\", \"Mississippi\", \"Missouri\", \"Montana\", \"Nebraska\", \"Nevada\", \"New Hampshire\", \"New Jersey\", \"New Mexico\", \"New York\", \"North Carolina\", \"North Dakota\", \"Northern Mariana Islands\", \"Ohio\", \"Oklahoma\", \"Oregon\", \"Pennsylvania\", \"Puerto Rico\", \"Rhode Island\", \"South Carolina\", \"South Dakota\", \"Tennessee\", \"Texas\", \"Utah\", \"Vermont\", \"Virgin Islands\", \"Virginia\", \"Washington\", \"West Virginia\", \"Wisconsin\", \"Wyoming\"] : ['confirmed', \"Deaths\", \"Recovered\"]\n    const xAxis = axisBottom(xScale)\n        .ticks(data.length)\n        // .attr(\"transform\",  `translate(10px, 10px) rotate(45deg)`)\n        .tickFormat((d, i) => xx[i])\n\n        if (province && province.length) {\n            svg\n            .select(\".x-axis\")\n            .style(\"transform\", `translateY(${dimensions.height}px) `)\n            .call(xAxis)\n            .selectAll(\"text\")\n            .attr(\"y\", 6)\n            .attr(\"x\", -6)\n            .attr(\"dy\", \".5em\")\n            .attr(\"transform\", \"rotate(-40)\")\n            .style(\"text-anchor\", \"end\");\n        } else if (province === false){\n            svg\n            .select(\".x-axis\")\n            .style(\"transform\", `translateY(${dimensions.height}px) `)\n            .call(xAxis)\n        }\n\n\n    //create y-axis\n    const yAxis = axisLeft(yScale);\n    svg\n        .select(\".y-axis\")\n        .style(\"transform\", `0`)\n        .call(yAxis);\n\n    if (province && province.length) {\n        svg\n        .selectAll(\".bar\")\n        .data(data)\n        .join(\"rect\")\n        .attr(\"class\", \"bar\")\n        .on(\"mouseenter\", function(event, value) {\n            const index = svg.selectAll(\".bar\").nodes().indexOf(this);\n            select(this)\n            .attr(\"opacity\", 0.3)\n            .transition()\n\n            svg\n                .selectAll(\".tooltip\")\n                .data([value])\n                .join((enter) => enter.append(\"text\").attr(\"y\", yScale(value) - 4))\n                .attr(\"class\", \"tooltip\")\n                .text(d => d.toLocaleString())\n                .attr(\"x\", xScale(index) + xScale.bandwidth() / 2)\n                .attr(\"text-anchor\", \"middle\")\n                .transition()\n                .attr(\"y\", yScale(value) - 8)\n                .attr(\"opacity\", 1);\n        })\n        .on(\"mouseleave\", function(event, value) {\n            select(this)\n            .attr(\"opacity\", 1)\n            .transition()\n\n            svg.selectAll(\".tooltip\").remove()\n        })\n        .style(\"transform\", 'scale(1, -1)')\n        .attr('x', (value, index) => xScale(index))\n        .attr('y', -dimensions.height)\n        .attr('width', xScale.bandwidth())\n        .on(\"click\", function(e, d) {\n            const index = svg.selectAll(\".bar\").nodes().indexOf(this);\n            handleClick(province, index);\n        })            \n        .transition()\n        .attr('fill', colorScale)\n        .attr('height', val => dimensions.height - yScale(val))\n\n    } else if (province === false){\n        svg\n            .selectAll(\".bar\")\n            .data(data)\n            .join(\"rect\")\n            .attr(\"class\", \"bar\")\n            .style(\"transform\", 'scale(1, -1)')\n            .attr('x', (value, index) => xScale(index))\n            .attr('y', -dimensions.height)\n            .attr('width', xScale.bandwidth())\n            .transition()\n            .attr('fill', colorScale)\n            .attr('height', val => dimensions.height - yScale(val))\n    \n        svg\n            .selectAll(\".content\")\n            .data(data)\n            .join(enter => enter.append('text').attr('y', d => yScale(d) - 4))\n            .attr('class', 'content')\n            .text(d => d.toLocaleString())\n            .attr('x', (d, i) => xScale(i) + xScale.bandwidth() / 2)\n            .attr('text-anchor', 'middle')\n            .transition()\n            .attr('y', d => yScale(d) - 8)\n            .attr(\"opacity\", 1);\n    }\n\n    \n\n\n  }, [data, dimensions, province]);\n\n  return (\n    <div ref={wrapperRef} style={{marginBottom: \"1.5rem\", marginLeft: \"4rem\"}}>\n        <svg ref={svgRef} className=\"main_svg\">\n            <g className=\"x-axis\" />\n            <g className=\"y-axis\" />\n        </svg> \n    </div>\n  );\n}\n\nexport default Barchart","import { arc, pie, select } from \"d3\";\nimport React, { useEffect, useRef } from \"react\";\nimport useResizeObserver from \"./useResizeObserver\";\n\n\nfunction PieChart({ data, colors }) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  // will be called initially and on every data change\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    if (!dimensions) return;\n    const reducer = (acc, cur) => acc + cur.value;\n    const totalSum = data.reduce(reducer, 0)\n    // arc takes instructions (objects with special properties, like startAngle, endAngle, etc.)\n    // and transforms them into \"d\" attributes for path elements\n    const arcGenerator = arc()\n    .innerRadius(10)\n    .outerRadius(150);\n\n    // pie will transform data to instructions for arcGenerator\n    const pieGenerator = pie()\n    .padAngle(0)\n    .value(d => d.value)\n    // .sort(null); // makes sure data doesn't get sorted\n    // now transform data to instructions for arc() \n    const instructions = pieGenerator(data)\n\n\n    svg\n        .selectAll(\".slice\")\n        .data(instructions)\n        .join(\"path\")\n        .attr(\"class\", 'slice')\n        .attr(\"stroke\", 'white')\n        .attr(\"fill\", (d, i) => colors[d.data.name])\n        .style('transform', `translate(${dimensions.width / 2}px, ${dimensions.height / 2}px)`)\n        .attr('d', arcGenerator)\n        .transition()\n\n\n        // .attr(\"stroke\", 'white')\n        // .attr(\"stroke-width\", '2px')\n        // .attr(\"fill\", (d, i) => colors[d.data.name])\n        // .style('transform', `translate(${dimensions.width / 2}px, ${dimensions.height / 2}px)`)\n        // .attr('d', arcGenerator)\n        // .transition()\n\n    svg\n        .selectAll(\".labels\")\n        .data(instructions)\n        .join(\"text\")\n        .attr(\"class\", \"labels\")\n        .text((d, i) => {\n          let num = d.data.value ? d.data.value : 0\n          let percentage = (num * 100) / totalSum\n          return num ? (percentage).toFixed(2) + '%' : null\n        })\n        .attr('fill','white')\n        .attr('x', (d, i) => {\n          return arcGenerator.centroid(d)[0] + (dimensions.width/2)-25\n        })\n        .attr('y', (d, i) => {\n          return arcGenerator.centroid(d)[1] + (dimensions.height/2)\n        })\n        .transition()\n\n\n  }, [data, dimensions]);\n\n  return (\n    <div className=\"svgContainer\" ref={wrapperRef} style={{ padding: '0' }}>\n        <svg ref={svgRef} className=\"main_svg\">\n\n        </svg>\n    </div>\n  );\n}\n\nexport default PieChart;","import React, { useState, useEffect, useRef } from \"react\";\nimport BarChart from \"../components/BarChart\";\nimport PieChart from \"../components/PieChart\";\n\nfunction Today() {\n  let today = new Date();\n  let month = today.getMonth() + 1;\n  let date = today.getDate();\n  let year = today.getFullYear();\n  return `${month}/${date}/${year}`;\n}\n\nconst colors = {\n  \"Global\": '#ffddc1',\n  \"US\": '#ffab91',\n};\n\nfunction Home() {\n  const [world, setWorld] = useState([]);\n  const [confirmed, setConfirmed] = useState([]);\n  const [deaths, setDeaths] = useState([]);\n  const [data, setDate] = useState([]);\n  const [province, setProvince] = useState([]);\n\n\n  const today = useRef(Today());\n  useEffect(() => {\n    // fetch(`http://127.0.0.1:8000/api/overview`)\n    fetch(`https://myungjinho85.pythonanywhere.com/api/overview`)\n      .then((res) => res.json())\n      .then((data) => {\n        // console.log(data);\n        setWorld(data.world_df.count);\n        setConfirmed(data.confirmed_global_us)\n        setDeaths(data.deaths_global_us)\n        setDate(data.state_df.Confirmed)\n        setProvince(data.state_df.Province_State)\n      });\n  }, []);\n\n  return (\n    <div className=\"main_chart_container\">\n      <div className=\"barChart1\">\n        <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n          Global Total Case\n          <span className=\"date\"> (Date: {today.current})</span>\n        </h4>\n        <BarChart data={world} />\n      </div>\n      <div className=\"pieChart1\">\n        <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n          Confirmed (Global / US)\n          <span className=\"date\"> (Date: {today.current})</span>\n        </h4>\n        <PieChart\n          data={confirmed}\n          colors={colors}\n        />\n        <div className=\"fields\" >\n            {confirmed.map(key => (\n              <div key={key.name}>\n                <div key={key.name} className=\"field\">\n                  <label htmlFor={key.name} style={{ color: colors[key.name] }}>\n                      {key.name}\n                  </label>\n                </div>\n                <div key={key.value} className=\"field\">\n                  <label htmlFor={key.value} style={{ color: colors[key.name] }}>\n                      {key.value.toLocaleString()}\n                  </label>\n                </div>\n              </div>\n            ))}\n        </div>\n      </div>\n      <div className=\"pieChart2\">\n        <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n          Deaths (Global / US)\n          <span className=\"date\"> (Date: {today.current})</span>\n        </h4>\n        <PieChart\n          data={deaths}\n          colors={colors}\n        />\n        <div className=\"fields\" >\n            {deaths.map(key => (\n              <div key={key.name}>\n                <div key={key.name} className=\"field\">\n                  <label htmlFor={key.name} style={{ color: colors[key.name] }}>\n                      {key.name}\n                  </label>\n                </div>\n                <div key={key.value} className=\"field\">\n                  <label htmlFor={key.value} style={{ color: colors[key.name] }}>\n                      {key.value.toLocaleString()}\n                  </label>\n                </div>\n              </div>                 \n            ))}\n        </div>        \n      </div>\n      <div className=\"barChart2\">\n        <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n          Total of Confirmed Case By US State\n          <span className=\"date\"> (Date: {today.current})</span>\n        </h4>\n        <BarChart data={data} province={province}  />\n      </div>\n    </div>\n  );\n}\nexport default Home;\n","import React from 'react';\nimport { Link } from \"react-router-dom\"\n\n\nfunction Navigation() {\n    return (\n            <div className=\"nav\" id=\"navbarNav\">\n                <h3 className=\"title\" style={{ margin: \"0.2rem\" }}>\n                <Link to='/'>COVID Tracker</Link></h3>\n                <ul className=\"navbar-nav\">\n                    <li className=\"navbar-nav-li\">\n                        <Link to='/'>Home</Link>\n                    </li>\n                    <li className=\"navbar-nav-li\">\n                        <Link to='/racing'>Racing Bar Chart</Link>\n                    </li>\n                </ul>\n            </div>\n    )\n}\n\nexport default Navigation;","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom, scaleLinear, axisLeft, scaleBand, max } from \"d3\";\nimport useResizeObserver from \"./useResizeObserver\";\nimport { useHistory } from \"react-router-dom\";\n\n\nfunction DetailBarChart({ data, period, opt=false }) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef)\n\n  useEffect(() => {\n    const svg = select(svgRef.current);\n    console.log(dimensions)\n\n    if (!dimensions) return;\n\n    //scale\n    const xScale = scaleBand()\n        .domain(data.map((value, index) => index))\n        .range([0, dimensions.width]) // change\n        .padding(0.1);\n\n    let maxNum = opt ? max(data)+2000 : max(data)+50000\n    const yScale = scaleLinear()\n        .domain([0, maxNum]) //todo\n        .range([dimensions.height, 0]); // change\n\n    const colorScale = scaleLinear()\n        .domain([0, (maxNum)/2, maxNum])\n        .range([\"green\", \"orange\", \"red\"])\n        .clamp(true);\n\n    //create x-axis\n    \n    const xAxis = axisBottom(xScale)\n    .tickValues([]);\n\n    svg\n    .select(\".x-axis\")\n    .style(\"transform\", `translateY(${dimensions.height}px) `)\n    .call(xAxis)\n        \n\n    let title = opt ? 'Deaths' : 'Confirmed'\n    //create y-axis\n    const yAxis = axisLeft(yScale);\n    svg\n        .select(\".y-axis\")\n        .style(\"transform\", `0`)\n        .call(yAxis);\n\n        svg\n        .selectAll(\".bar\")\n        .data(data)\n        .join(\"rect\")\n        .attr(\"class\", \"bar\")\n        .on(\"mouseenter\", function(event, value) {\n            const index = svg.selectAll(\".bar\").nodes().indexOf(this);\n            select(this)\n            .attr(\"opacity\", 0.2)\n            .transition()\n\n            svg\n                .selectAll(\".tooltip\")\n                .data([value])\n                .join((enter) => enter.append(\"text\").attr(\"y\", yScale(value) - 4))\n                .attr(\"class\", \"tooltip\")\n                .text(d => `${period[index]}: ${d.toLocaleString()} ${title}`)\n                // .text(d => `${d.toLocaleString()} ${title}`)\n                .attr(\"x\", xScale(index) + xScale.bandwidth() / 2 - 80)\n                .attr(\"text-anchor\", \"middle\")\n                .transition()\n                .attr(\"y\", yScale(value) - 8)\n                .attr(\"opacity\", 1);\n        })\n        .on(\"mouseleave\", function(event, value) {\n            select(this)\n            .attr(\"opacity\", 1)\n            .transition()\n            svg.selectAll(\".tooltip\").remove()\n        })\n        .style(\"transform\", 'scale(1, -1)')\n        .attr('x', (value, index) => xScale(index))\n        .attr('y', -dimensions.height)\n        .attr('width', xScale.bandwidth())          \n        .transition()\n        .attr('fill', colorScale)\n        .attr('height', val => dimensions.height - yScale(val))\n\n    svg\n        .selectAll('.y-axis-label')\n        .data([title])\n        .join(\n            enter => enter.append(\"text\").attr('class', 'y-axis-label')\n        )\n        .attr(\"fill\", \"Navy\")//set the fill here\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"y\", -55)\n        .attr(\"x\", 0 - (dimensions.height / 2) - 48)\n        .text(d => d)\n\n\n  }, [data, dimensions]);\n\n  return (\n    <div ref={wrapperRef} style={{marginBottom: \"1.5rem\", marginLeft: \"4rem\"}}>\n        <svg ref={svgRef} className=\"detail_svg\">\n            <g className=\"x-axis\" />\n            <g className=\"y-axis\" />\n        </svg> \n    </div>\n  );\n}\n\nexport default DetailBarChart","import React, { useState, useEffect, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport DetailBarChart from \"../components/DetailBarChart\";\n\nfunction Today() {\n    let today = new Date();\n    let month = today.getMonth() + 1;\n    let date = today.getDate();\n    let year = today.getFullYear();\n    return `${month}/${date}/${year}`;\n  }\n\nfunction Detail() {\n    const [period, setPeriod] = useState([]);\n    const [confirmed, setConfirmed] = useState([]);\n    const [deaths, setDeaths] = useState([]);\n    const today = useRef(Today());\n\n\n    let { state } = useParams();\n    useEffect(() => {\n        // fetch(`http://127.0.0.1:8000/api/detail/${state}`)\n        fetch(`https://myungjinho85.pythonanywhere.com/api/detail/${state}`)\n        .then((res) => res.json())\n        .then((data) => {\n            // console.log(data, 'data')\n            setPeriod(data.period)\n            setConfirmed(data.confirmed)\n            setDeaths(data.deaths)\n        })\n    }, [])\n\n    return (\n        <div className=\"detail_chart_container\">\n            <div className=\"detailBarChart\">\n                <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n                {state} Confirmed Total\n                <span className=\"date\"> (as of {today.current})</span>\n                </h4>\n                {confirmed.length ? <DetailBarChart data={confirmed} period={period}/> : null}\n            </div>\n            <div className=\"detailBarChart\">\n                <h4 className=\"title\" style={{ margin: \"0.3rem\" }}>\n                {state} Deaths Total\n                <span className=\"date\"> (as of {today.current})</span>\n                </h4>\n                {deaths.length ? <DetailBarChart data={deaths} opt={true} period={period}/> : null}\n            </div>\n        </div>\n    );\n}\nexport default Detail;","import React from 'react';\nimport {HashRouter as Router, Route, Switch} from \"react-router-dom\";\nimport RacingChartHome from './routes/RacingChartHome';\nimport Home from './routes/Home';\nimport Navigation from './components/Navigation';\nimport Detail from './routes/Detail';\n\n\nconst AppRouter = () => {\n    \n    return (\n        <Router>\n            <Navigation />\n            <Switch>\n                <>\n                    <Route exact path='/'>\n                        <Home />\n                    </Route>\n                    <Route path='/racing'>\n                        <RacingChartHome />\n                    </Route>                     \n                    <Route path='/detail/:state'>\n                        <Detail />\n                    </Route>\n                </>\n            </Switch>\n        </Router>\n    )\n}\n\nexport default AppRouter","  import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport AppRouter from './Router';\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppRouter />\n    </div>\n  );    \n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Router } from \"react-router\";\nimport { createBrowserHistory } from \"history\";\n\nconst history = createBrowserHistory();\n\nReactDOM.render(\n    <Router history={history} >\n      <App />\n    </Router>,\n    document.getElementById('root')\n);"],"sourceRoot":""}